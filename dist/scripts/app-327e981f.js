(function(){angular.module("jkbx",["ngAnimate","ngCookies","ngTouch","ngSanitize","ui.router","firebase","youtube-embed"]).config(["$stateProvider","$urlRouterProvider",function(a,e){return a.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"}).state("party",{url:"/party/:name",templateUrl:"app/party/party.html",controller:"PartyCtrl"}).state("player",{url:"/party/:name/player",templateUrl:"app/player/player.html",controller:"PlayerCtrl"}),e.otherwise("/")}])}).call(this),function(){angular.module("jkbx").controller("NavbarCtrl",["$scope",function(a){return a.date=new Date}])}.call(this),function(){angular.module("jkbx").controller("PlayerCtrl",["$scope","$stateParams","$firebaseArray","$firebaseObject",function(a,e,r,t){var l;return l={tracks:new Firebase("https://jkbx.firebaseio.com/party/"+e.name+"/tracks"),controls:new Firebase("https://jkbx.firebaseio.com/party/"+e.name+"/controls"),playedTracks:new Firebase("https://jkbx.firebaseio.com/party/"+e.name+"/playedTracks")},a.tracks=r(l.tracks),a.playedTracks=r(l.playedTracks),a.controls=t(l.controls),a.playerHeight=window.innerHeight,a.playerWidth=window.innerWidth,a.index=0,a.player=null,a.controls.$watch(function(){switch(a.controls.action){case"pause":return a.player.pauseVideo();case"play":return a.player.playVideo();case"skip":return a.player.seekTo(a.player.getDuration())}}),a.tracks.$loaded().then(function(){return console.log("Tracks loaded"),a.playing=a.tracks[0]}),a.$on("youtube.player.ready",function(e,r){return a.playing.playing=!0,a.tracks.$save(a.playing),a.player=r,a.player.playVideo()}),a.$on("youtube.player.ended",function(){return a.playedTracks.$add(a.playing),a.tracks.$remove(0).then(function(){return a.playing=a.tracks[0]})})}])}.call(this),function(){angular.module("jkbx").controller("PartyCtrl",["$scope","$stateParams","$firebaseArray","$firebaseObject",function(a,e,r,t){var l,i;return i={tracks:new Firebase("https://jkbx.firebaseio.com/party/"+e.name+"/tracks"),controls:new Firebase("https://jkbx.firebaseio.com/party/"+e.name+"/controls"),playedTracks:new Firebase("https://jkbx.firebaseio.com/party/"+e.name+"/playedTracks")},l=t(i.controls),a.user="Stranger",a.party=e.name,a.newTrack={},a.tracks=r(i.tracks),a.playedTracks=r(i.playedTracks),a.loadingTracks=!0,localStorage.jkbx_name?a.user=localStorage.jkbx_name:swal({title:"Hello, stranger! Tell me your name.",type:"input",showCancelButton:!1,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Bob is fine."},function(e){return e===!1?!1:""===e?(swal.showInputError("You need to introduce yourself!"),!1):(localStorage.jkbx_name=e,swal("Legit!","Welcome to the party "+e+"!","success"),a.user=e)}),a.tracks.$loaded().then(function(){return a.loadingTracks=!1}),a.trackAction=function(a){return l.action=a,l.time=Date.now(),l.$save().then(function(){return console.log("pew pew -- ",l)})},a.addTrack=function(e){return a.tracks.$add({img:e.snippet.thumbnails["default"].url,title:e.snippet.title,videoId:e.id.videoId,playing:!1,addedBy:a.user}),a.newTrack.name=""},a.$watch("newTrack.name",function(e){if(e&&0!==e.length){if(e===a.newTrack.name)return a.searchForVideos()}else a.results={}}),a.searchForVideos=function(){var e;return a.newTrack.name.length>3?(e=gapi.client.youtube.search.list({q:a.newTrack.name,part:"snippet",type:"video"}),e.execute(function(e){return a.$apply(function(){return a.results=e.result.items})})):void 0}}])}.call(this),function(){angular.module("jkbx").controller("MainCtrl",["$scope","$state",function(a,e){return a.findOrCreateRoom=function(){return e.go("party",{name:a.roomName})}}])}.call(this),angular.module("jkbx").run(["$templateCache",function(a){a.put("app/components/navbar/navbar.html",'<nav class="navbar" ng-controller="NavbarCtrl"><a href="https://github.com/Swiip/generator-gulp-angular">Gulp Angular</a><ul><li class="active"><a ng-href="#">Home</a></li><li><a ng-href="#">About</a></li><li><a ng-href="#">Contact</a></li></ul><ul><li><a ng-href="#">Current date: {{ date | date:\'yyyy-MM-dd\' }}</a></li></ul></nav>'),a.put("app/main/main.html",'<div class="container"><div class="landing-page"><h1 class="tagline">They call me jkbx.</h1><h4>No nonsense collaborative youtube playlist for the masses.</h4><form name="form" ng-submit="findOrCreateRoom()"><div class="row"><div class="six columns"><div class="row"><input type="text" ng-model="roomName" placeholder="mega-hipster-music-playlist" class="eight columns"><div class="two columns"><a ui-sref="party({name: roomName})" class="button button-primary">Join or Create a playlist</a></div></div></div></div></form></div></div>'),a.put("app/party/party.html",'<div class="container"><div class="party-page"><h1>{{party}}\'s playlist</h1><div class="row"><div class="six columns"><h6>Hi {{user}}, Search for a track!</h6><form name="form" class="search"><input type="text" ng-model="newTrack.name" ng-model-options="{debounce: 800}" placeholder="Find your favorite artist or song.." class="search-bar u-full-width"><ul ng-if="results.length &gt; 1" class="search-results"><li ng-repeat="result in results" ng-click="addTrack(result)"><div class="image-holder"><img src="{{result.snippet.thumbnails.default.url}}"></div><p class="metadata"><strong>{{result.snippet.title}}</strong>\' ({{result.snippet.channelTitle}})</p></li></ul></form><div ng-if="loadingTracks"><h2 class="text-center">Gimme a sec to get the tracks...</h2></div><div ng-if="tracks.length &lt; 1 &amp;&amp; !loadingTracks"><div class="text-center"><h2>Nothing to see here.</h2><h4>Try adding a track!</h4></div></div><div ng-if="tracks.length &gt;= 1 &amp;&amp; !loadingTracks"><div class="row"><h6>Up Next</h6></div><div class="row"><ul class="queue-list"><li ng-repeat="track in tracks track by $index" ng-class="{playing: track.playing &amp;&amp; $index == 0}"><div class="image-holder"><img src="{{track.img}}"></div><p class="metadata"><strong>{{ track.title }}</strong><span ng-if="track.addedBy != \'\'">&nbsp - {{track.addedBy}}</span></p><p class="controls"><a href="" title="remove" ng-click="tracks.$remove($index)"><i class="ion-close"></i></a></p></li></ul></div></div></div><div ng-if="!loadingTracks" class="six columns"><h6>now playing</h6><div class="now-playing"><li ng-if="!tracks[0].playing"><p class="metadata"><strong>No song playing.</strong></p></li><li ng-if="tracks[0].playing"><div class="image-holder"><img src="{{tracks[0].img}}"></div><p class="metadata"><strong>{{ tracks[0].title }}</strong></p></li><div class="row track-actions"><div class="four columns"><a href="" ng-click="trackAction(\'pause\')" class="u-full-width"><i class="ion-ios-pause"></i></a></div><div class="four columns"><a href="" ng-click="trackAction(\'play\')" class="u-full-width"><i class="ion-ios-play"></i></a></div><div class="four columns"><a href="" ng-click="trackAction(\'skip\')" class="u-full-width"><i class="ion-ios-skipforward"></i></a></div></div></div><div class="row"><div class="twelve columns"><a ui-sref="player({name: party})" target="_blank" class="u-full-width button">Pop-out Youtube Player &nbsp;<i class="ion-arrow-right-a"></i></a></div></div><div ng-if="!loadingTracks &amp;&amp; playedTracks.length &gt; 0"><div class="row"><h6>Played Tracks</h6></div><div class="row"><ul class="queue-list"><li ng-repeat="track in playedTracks track by $index"><div class="image-holder"><img src="{{track.img}}"></div><p class="metadata"><strong>{{ track.title }}</strong></p><p class="controls"><a href="" title="requeue" ng-click="tracks.$add(track)"><i class="ion-refresh"></i></a><a href="" title="remove" ng-click="playedTracks.$remove($index)"><i class="ion-close"></i></a></p></li></ul></div></div></div></div></div></div>'),a.put("app/player/player.html",'<div class="player-page"><youtube-video id="web-player" video-id="playing.videoId" player="player" player-height="playerHeight" player-width="playerWidth"></youtube-video></div>')}]);